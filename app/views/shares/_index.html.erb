<div class="modal" tabindex="-1" role="dialog" id="shareModal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Share Note</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <%# TODO: use only one object to show errors %>
        <%# TODO: You can refactor errors to a separate partial %>
        <% if @user.errors.any? %>
          <div id="error_explanation">
            <h2>
              <%= pluralize(@user.errors.count, "error") %> prohibited
              this note from being saved:
            </h2>
            <ul>
              <% @user.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
              <% end %>
            </ul>
          </div>
        <% end %>
        <% if @share.errors.any? %>
          <div id="error_explanation">
            <h2>
              <%= pluralize(@share.errors.count, "error") %> prohibited
              this note from being saved:
            </h2>
            <ul>
              <% @share.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
              <% end %>
            </ul>
          </div>
        <% end %>
        <h4 class="my-3">Shared With</h4>
        <ul class="list-group user-list-shares">
          <% if @note.shares.any? %>
            <% @note.shares.each do |share| %>
              <%= render 'share', user: share.user, note: share.note %>
            <% end %>
          <% else %>
            <li class="list-group-item">Shared with none</li>
          <% end %>
        </ul>
        <h4 class="my-3">Invite People</h4>
        <%= form_with model: [@note, @share], html: { autocomplete: "off" } do |form| %>

          <div class="form-group">
            <%= form.email_field :email, class: "form-control suggest-user", required: true, placeholder: "Enter user email" %>
          </div>
          <div class="modal-footer">
            <%= form.submit "Share", remote: true, class: "btn btn-info share-form-submit-btn" %>
          </div>
          </div>
        <% end %>
        </div>
  </div>
</div>